<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Rules? - Interactive Smartboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Tailwind gray-900 */
            color: #F9FAFB; /* Tailwind gray-50 */
        }
        .flowchart-line {
            position: relative;
            z-index: 0;
        }
        .flowchart-line::before {
            content: '';
            position: absolute;
            background-color: #4B5563; /* Tailwind gray-600 */
            z-index: -1;
        }
        /* Vertical lines */
        .line-v::before {
            left: 50%;
            width: 4px;
            top: -20px;
            height: 20px;
            transform: translateX(-50%);
        }
         /* Horizontal lines */
        .line-h::before {
            top: 50%;
            height: 4px;
            left: -20px;
            width: 20px;
            transform: translateY(-50%);
        }
        .main-line::before {
            top: 50%;
            height: 4px;
            left: 0;
            right: 0;
            transform: translateY(-50%);
        }
        .category-node .sub-nodes {
            display: none;
        }
        .category-node.open .sub-nodes {
            display: flex;
        }
        .modal-backdrop {
            background-color: rgba(0,0,0,0.75);
        }
        .scenario-card {
            touch-action: none;
        }
        .drop-zone {
            border: 3px dashed #4B5563;
        }
        .drop-zone.drag-over {
            border-color: #3B82F6;
            background-color: #1F2937;
        }
        .drop-zone.correct {
            border-color: #22C55E;
            background-color: #143621;
        }
        .drop-zone.incorrect {
            border-color: #EF4444;
            background-color: #450a0a;
        }
        .draggable-item {
            cursor: grab;
        }
        .draggable-item:active {
            cursor: grabbing;
        }
        .draggable-item.dragging {
            opacity: 0.5;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 lg:p-8 overflow-hidden">

    <div id="app-container" class="w-full h-full flex flex-col items-center">
        <!-- Header -->
        <header class="text-center mb-8 lg:mb-16">
            <h1 class="text-4xl md:text-5xl lg:text-7xl font-black tracking-tight text-white">Who Rules?</h1>
            <p class="text-lg md:text-xl lg:text-2xl text-gray-400 mt-2">An Interactive Guide to Forms of Government</p>
        </header>

        <!-- Main Flowchart Hub -->
        <main id="flowchart-hub" class="flex flex-col items-center w-full">
            <div class="relative mb-8">
                 <div class="absolute top-1/2 left-0 w-full h-1 bg-gray-600" style="transform: translateY(-50%);"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-12 lg:gap-20 w-full max-w-7xl">
                <!-- Category: NONE -->
                <div class="category-node flex flex-col items-center" data-category="none">
                    <button class="main-category-btn text-3xl font-bold bg-gray-800 border-2 border-gray-600 rounded-2xl py-6 px-12 transition-transform transform hover:scale-105 hover:bg-gray-700 w-full">NONE</button>
                    <div class="sub-nodes mt-6 w-full">
                        <div class="flex flex-col items-center w-full space-y-4">
                            <div class="flowchart-line line-v"></div>
                            <button class="sub-node-btn text-2xl bg-blue-600 rounded-xl py-4 px-8 w-full transition-transform transform hover:scale-105 hover:bg-blue-500" data-gov="anarchy">Anarchy</button>
                        </div>
                    </div>
                </div>

                <!-- Category: ONE -->
                <div class="category-node flex flex-col items-center" data-category="one">
                    <button class="main-category-btn text-3xl font-bold bg-gray-800 border-2 border-gray-600 rounded-2xl py-6 px-12 transition-transform transform hover:scale-105 hover:bg-gray-700 w-full">ONE</button>
                    <div class="sub-nodes mt-6 w-full">
                        <div class="flex flex-col items-center w-full space-y-4">
                            <div class="flowchart-line line-v"></div>
                            <button class="sub-node-btn text-2xl bg-purple-600 rounded-xl py-4 px-8 w-full transition-transform transform hover:scale-105 hover:bg-purple-500" data-gov="monarchy">Monarchy</button>
                            <button class="sub-node-btn text-2xl bg-purple-600 rounded-xl py-4 px-8 w-full transition-transform transform hover:scale-105 hover:bg-purple-500" data-gov="dictatorship">Dictatorship</button>
                        </div>
                    </div>
                </div>

                <!-- Category: FEW -->
                <div class="category-node flex flex-col items-center" data-category="few">
                    <button class="main-category-btn text-3xl font-bold bg-gray-800 border-2 border-gray-600 rounded-2xl py-6 px-12 transition-transform transform hover:scale-105 hover:bg-gray-700 w-full">FEW</button>
                     <div class="sub-nodes mt-6 w-full">
                        <div class="flex flex-col items-center w-full space-y-4">
                            <div class="flowchart-line line-v"></div>
                            <button class="sub-node-btn text-2xl bg-red-600 rounded-xl py-4 px-8 w-full transition-transform transform hover:scale-105 hover:bg-red-500" data-gov="oligarchy">Oligarchy</button>
                        </div>
                    </div>
                </div>

                <!-- Category: ALL -->
                <div class="category-node flex flex-col items-center" data-category="all">
                    <button class="main-category-btn text-3xl font-bold bg-gray-800 border-2 border-gray-600 rounded-2xl py-6 px-12 transition-transform transform hover:scale-105 hover:bg-gray-700 w-full">ALL</button>
                     <div class="sub-nodes mt-6 w-full">
                        <div class="flex flex-col items-center w-full space-y-4">
                            <div class="flowchart-line line-v"></div>
                            <button class="sub-node-btn text-2xl bg-green-600 rounded-xl py-4 px-8 w-full transition-transform transform hover:scale-105 hover:bg-green-500" data-gov="democracy">Democracy</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Special Buttons -->
        <footer class="mt-12 lg:mt-20 flex flex-col md:flex-row gap-6">
             <button class="special-topic-btn text-2xl font-bold bg-yellow-500 text-gray-900 rounded-2xl py-4 px-8 transition-transform transform hover:scale-105 hover:bg-yellow-400" data-gov="theocracy">
                âœ¨ Where does Theocracy fit?
            </button>
            <button id="test-knowledge-btn" class="text-2xl font-bold bg-indigo-600 text-white rounded-2xl py-4 px-8 transition-transform transform hover:scale-105 hover:bg-indigo-500">
                ðŸŽ® Test Your Knowledge
            </button>
        </footer>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop hidden">
        <div id="modal-content" class="bg-gray-800 border-2 border-gray-600 w-full max-w-4xl max-h-[90vh] rounded-3xl shadow-2xl flex flex-col transition-transform transform scale-95">
            <header class="p-6 flex justify-between items-center border-b border-gray-700">
                <h2 id="modal-title" class="text-4xl font-black">Government Type</h2>
                <button id="modal-close-btn" class="text-4xl text-gray-400 hover:text-white">&times;</button>
            </header>
            <main class="p-8 overflow-y-auto flex-grow">
                <div class="grid grid-cols-1 gap-8">
                    <div>
                        <p id="modal-definition" class="text-2xl font-light mb-6 bg-gray-900 p-4 rounded-lg"></p>
                        <h3 class="text-2xl font-bold mb-3">Key Characteristics:</h3>
                        <ul id="modal-characteristics" class="text-xl list-disc list-inside space-y-2">
                            <!-- Characteristics will be injected here -->
                        </ul>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Activity Modal -->
    <div id="activity-modal" class="fixed inset-0 z-50 flex flex-col items-center justify-center p-4 modal-backdrop hidden">
        <div class="bg-gray-800 border-2 border-gray-600 w-full max-w-7xl h-[90vh] rounded-3xl shadow-2xl flex flex-col relative">
             <header class="p-6 flex justify-between items-center border-b border-gray-700">
                <h2 class="text-3xl font-black">Classify the Government</h2>
                <button id="activity-close-btn" class="text-4xl text-gray-400 hover:text-white">&times;</button>
            </header>
            <main class="p-8 flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8 overflow-hidden">
                <div id="scenarios-container" class="bg-gray-900 rounded-xl p-6 flex flex-col gap-4 overflow-y-auto">
                    <!-- Scenario cards will be injected here -->
                </div>
                <div id="answers-container" class="grid grid-cols-2 gap-4 overflow-y-auto">
                    <!-- Drop zones will be injected here -->
                </div>
            </main>
            <div id="activity-feedback" class="absolute bottom-6 left-1/2 -translate-x-1/2 bg-green-600 text-white py-3 px-8 rounded-xl text-2xl font-bold hidden shadow-lg">
                ðŸŽ‰ All Correct! Well Done! ðŸŽ‰
            </div>
        </div>
    </div>


    <script>
        // --- Data ---
        const governmentData = {
            anarchy: {
                title: 'Anarchy',
                definition: 'Nobody is in controlâ€”or everyone is, depending on how you look at it.',
                characteristics: [
                    'The human state of existence before any governments developed.',
                    'Similar to animals in the wild, with everyone looking out for themselves.',
                    'Anarchists believe people should freely associate without being subject to a government.'
                ]
            },
            monarchy: {
                title: 'Monarchy',
                definition: 'A king or queen rules the country, known as a monarch.',
                characteristics: [
                    'Power is passed down through the family line (hereditary).',
                    'In historical times, monarchs held absolute power.',
                    'Modern monarchs often share power and are subject to a constitution (constitutional monarchy).'
                ]
            },
            dictatorship: {
                title: 'Dictatorship',
                definition: 'One leader has absolute control over citizens\' lives and the constitution.',
                characteristics: [
                    'Other parts of government (courts, lawmaking bodies) have no real power.',
                    'The government does not represent the citizens.',
                    'The leader often uses force to maintain control.'
                ]
            },
            oligarchy: {
                title: 'Oligarchy',
                definition: 'A small group of people has all the power. From Greek for "rule by a few."',
                characteristics: [
                    'Power can be based on social class, race, or political party.',
                    'A junta is a type of oligarchy where military officers rule after taking over by force.',
                    'Operates much like a dictatorship, but power is shared among a few.'
                ]
            },
            democracy: {
                title: 'Democracy',
                definition: 'Citizens hold the political power.',
                characteristics: [
                    'Two main types: Representative and Direct.',
                    'In a Representative Democracy, citizens elect leaders to govern for them (e.g., USA, Peru).',
                    'In a Direct Democracy, citizens are directly involved in governing. This is rare in modern times.',
                    'Ultimate power rests with the people, who can vote for new leaders.'
                ]
            },
            theocracy: {
                title: 'Theocracy',
                definition: 'A government that recognizes God or a divine being as the ultimate authority.',
                characteristics: [
                    'Religious law is used to rule the people and settle disputes.',
                    'Can be combined with other government types like democracy or monarchy.',
                    'Example: The Republic of Iran is an Islamic theocracy but also holds elections.'
                ]
            }
        };

        const activityScenarios = [
            { id: 's1', text: 'A small group of wealthy families has ruled this nation for centuries. They make all the laws to benefit their own businesses.', answer: 'oligarchy' },
            { id: 's2', text: 'The nation is in chaos. There is no one in charge, and people just do whatever they want. It is every person for themselves.', answer: 'anarchy' },
            { id: 's3', text: 'Citizens vote every four years to choose their president and members of the legislature.', answer: 'democracy' },
            { id: 's4', text: 'Queen Isabella inherited the throne from her father. Her word is law.', answer: 'monarchy' },
            { id: 's5', text: 'The "Supreme Leader" has total control. He shut down the newspapers and jails anyone who criticizes him.', answer: 'dictatorship' },
            { id: 's6', text: 'The country\'s laws are based on a holy book, and religious leaders hold the most power.', answer: 'theocracy' },
        ];


        // --- Flowchart & Modal Logic ---
        const categoryNodes = document.querySelectorAll('.category-node');
        const infoModal = document.getElementById('info-modal');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        categoryNodes.forEach(node => {
            node.querySelector('.main-category-btn').addEventListener('click', () => {
                node.classList.toggle('open');
            });
        });

        const openModal = (govKey) => {
            const data = governmentData[govKey];
            if (!data) return;

            document.getElementById('modal-title').textContent = data.title;
            document.getElementById('modal-definition').textContent = data.definition;
            const characteristicsList = document.getElementById('modal-characteristics');
            characteristicsList.innerHTML = data.characteristics.map(item => `<li>${item}</li>`).join('');
            
            infoModal.classList.remove('hidden');
            setTimeout(() => modalContent.classList.remove('scale-95'), 10);
        };

        const closeModal = () => {
            modalContent.classList.add('scale-95');
            setTimeout(() => infoModal.classList.add('hidden'), 200);
        };

        document.querySelectorAll('.sub-node-btn, .special-topic-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                openModal(btn.dataset.gov);
            });
        });

        modalCloseBtn.addEventListener('click', closeModal);
        infoModal.addEventListener('click', (e) => {
            if (e.target === infoModal) {
                closeModal();
            }
        });

        // --- Activity Logic ---
        const activityModal = document.getElementById('activity-modal');
        const testKnowledgeBtn = document.getElementById('test-knowledge-btn');
        const activityCloseBtn = document.getElementById('activity-close-btn');
        const scenariosContainer = document.getElementById('scenarios-container');
        const answersContainer = document.getElementById('answers-container');
        const activityFeedback = document.getElementById('activity-feedback');
        
        let correctAnswers = 0;
        
        const setupActivity = () => {
            correctAnswers = 0;
            activityFeedback.classList.add('hidden');
            scenariosContainer.innerHTML = '';
            answersContainer.innerHTML = '';

            // Shuffle scenarios
            const shuffledScenarios = [...activityScenarios].sort(() => Math.random() - 0.5);

            shuffledScenarios.forEach(scenario => {
                const card = document.createElement('div');
                card.id = scenario.id;
                card.className = 'scenario-card draggable-item bg-gray-800 p-4 rounded-lg border border-gray-700 cursor-grab';
                card.draggable = true;
                card.textContent = scenario.text;
                card.dataset.answer = scenario.answer;
                scenariosContainer.appendChild(card);
            });

            const uniqueAnswers = [...new Set(activityScenarios.map(s => s.answer))];
            uniqueAnswers.forEach(answerKey => {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone rounded-xl p-4 h-32 flex items-center justify-center';
                dropZone.dataset.accepts = answerKey;
                
                const title = document.createElement('h3');
                title.className = 'text-2xl font-bold text-center';
                title.textContent = governmentData[answerKey].title;
                dropZone.appendChild(title);
                
                answersContainer.appendChild(dropZone);
            });
            
            addDragDropListeners();
        };

        const addDragDropListeners = () => {
            const draggables = document.querySelectorAll('.draggable-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    draggable.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', draggable.id);
                });
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    const id = e.dataTransfer.getData('text');
                    const draggable = document.getElementById(id);

                    if (zone.dataset.accepts === draggable.dataset.answer) {
                        zone.classList.remove('incorrect');
                        zone.classList.add('correct');
                        zone.appendChild(draggable);
                        draggable.draggable = false;
                        draggable.style.cursor = 'default';
                        draggable.classList.remove('bg-gray-800', 'border-gray-700');
                        draggable.classList.add('bg-transparent', 'border-0', 'text-sm', 'text-center', 'mt-2', 'text-gray-300');
                        correctAnswers++;
                        if (correctAnswers === activityScenarios.length) {
                            activityFeedback.classList.remove('hidden');
                        }
                    } else {
                        zone.classList.add('incorrect');
                        setTimeout(() => zone.classList.remove('incorrect'), 500);
                    }
                });
            });
        };

        testKnowledgeBtn.addEventListener('click', () => {
            setupActivity();
            activityModal.classList.remove('hidden');
        });
        activityCloseBtn.addEventListener('click', () => activityModal.classList.add('hidden'));
        activityModal.addEventListener('click', e => {
            if (e.target === activityModal) {
                activityModal.classList.add('hidden');
            }
        });
    </script>
</body>
</html>

