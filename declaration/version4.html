<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Declaration Explorer</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f1ea;
        }
        .font-serif {
            font-family: 'Libre Baskerville', serif;
        }
        /* Texture overlay */
        .texture-overlay {
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise' x='0' y='0'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.1'/%3E%3C/svg%3E");
            opacity: 0.4;
            mix-blend-mode: multiply;
            pointer-events: none;
        }
        
        /* Modern Mode Transitions */
        .modern-content {
            display: none;
        }
        .show-modern .modern-content {
            display: block;
        }
        .original-content {
            width: 100%;
        }
        .show-modern .original-content {
            width: 100%;
        }
        @media (min-width: 768px) {
            .show-modern .original-content {
                width: 50%;
                border-right: 1px solid #f3f4f6;
            }
        }
        
        /* Vocab Highlight */
        .vocab-word {
            background-color: #fef9c3;
            color: #713f12;
            border-bottom: 2px solid #facc15;
            cursor: help;
            transition: background-color 0.2s;
            padding: 0 2px;
            border-radius: 2px;
            font-weight: 500;
        }
        .vocab-word:hover {
            background-color: #fef08a;
        }

        /* Scroll Offset for sticky header */
        .section-scroll-target {
            scroll-margin-top: 140px;
        }
    </style>
</head>
<body class="text-gray-900 relative">

    <!-- Texture Background -->
    <div class="fixed inset-0 texture-overlay"></div>

    <!-- Header -->
    <header class="bg-[#2c3e50] text-[#ecf0f1] shadow-lg sticky top-0 z-40">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i data-lucide="feather" class="w-6 h-6 text-yellow-500"></i>
                <h1 className="text-xl md:text-2xl font-bold tracking-wider font-serif">Declaration Parser</h1>
            </div>
            
            <div className="flex items-center space-x-4">
                <div className="hidden md:flex text-sm items-center space-x-2 bg-white/10 px-3 py-1 rounded-full cursor-pointer" onclick="toggleModernMode()">
                    <span id="label-1776" class="font-bold text-yellow-400 transition-colors">1776</span>
                    <div id="toggle-bg" class="w-12 h-6 rounded-full p-1 transition-colors duration-300 ease-in-out bg-gray-600 relative">
                        <div id="toggle-circle" class="bg-white w-4 h-4 rounded-full shadow-md transform duration-300 absolute top-1 left-1"></div>
                    </div>
                    <span id="label-modern" class="text-gray-400 transition-colors">Modern</span>
                </div>
            </div>
        </div>
        
        <!-- Navigation Strip -->
        <div class="bg-[#34495e] overflow-x-auto">
            <div id="nav-container" class="max-w-5xl mx-auto px-2 py-2 flex space-x-2 md:justify-center min-w-max">
                <!-- Nav Buttons Injected Here -->
            </div>
        </div>
    </header>

    <!-- Mobile Toggle (Floating) -->
    <div class="md:hidden fixed bottom-6 right-6 z-50">
        <button onclick="toggleModernMode()" class="bg-blue-600 text-white p-4 rounded-full shadow-xl flex items-center shadow-blue-900/30 hover:bg-blue-700 transition-transform active:scale-95">
            <i id="mobile-toggle-icon" data-lucide="scroll"></i>
            <span id="mobile-toggle-text" class="ml-2 font-bold">Translate</span>
        </button>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="max-w-4xl mx-auto px-4 py-8 space-y-12 pb-24 relative z-10">
        
        <div class="text-center space-y-4 mb-12">
            <h2 class="text-4xl md:text-5xl font-serif text-[#2c3e50] font-bold">The Declaration of Independence</h2>
            <p class="text-gray-600 italic font-serif">In Congress, July 4, 1776</p>
            <div class="w-24 h-1 bg-red-800 mx-auto rounded"></div>
            <p class="text-sm text-gray-500 max-w-xl mx-auto">
                Tap highlighted words to see their definitions. Use the toggle to switch between the original text and a modern explanation.
            </p>
        </div>

        <!-- Sections Container -->
        <div id="sections-container">
            <!-- Sections Injected Here -->
        </div>

    </main>

    <!-- Vocabulary Modal -->
    <div id="vocab-modal" class="fixed inset-0 z-50 flex items-center justify-center px-4 bg-black/50 backdrop-blur-sm hidden" onclick="closeModal()">
        <div class="bg-white rounded-xl shadow-2xl p-6 max-w-sm w-full transform transition-all border-t-4 border-yellow-500" onclick="event.stopPropagation()">
            <div class="flex justify-between items-start mb-4">
                <h3 id="modal-word" class="text-2xl font-serif font-bold text-[#2c3e50] capitalize">Word</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <p id="modal-def" class="text-lg text-gray-700">Definition goes here.</p>
            <div class="mt-6 flex justify-end">
                <button onclick="closeModal()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors font-medium text-sm">
                    Got it
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-[#2c3e50] text-gray-400 py-8 text-center relative z-10">
        <p class="text-sm">Interactive History Parser</p>
    </footer>

    <script>
        // --- DATA ---
        const declarationSections = [
            {
                id: 'A',
                title: 'The Introduction',
                original: "When in the Course of human events, it becomes necessary for one people to dissolve the political bands which have connected them with another, and to assume among the powers of the earth, the separate and equal station to which the Laws of Nature and of Nature's God entitle them, a decent respect to the opinions of mankind requires that they should declare the causes which impel them to the separation.",
                modern: "Sometimes in history, a group of people needs to separate themselves from the country they were part of. They need to become an independent country, equal to all others, as natural law allows. Out of respect for the rest of the world, they should explain exactly why they are leaving.",
                analysis: "This sets the stage. Jefferson is saying, \"We are breaking up, and we owe the world an explanation why.\"",
                vocab: {
                "dissolve": "To end or close down.",
                "impel": "To force or drive someone to do something.",
                "station": "Status or position.",
                "entitle": "To give a right to."
                }
            },
            {
                id: 'B',
                title: 'The Preamble (Natural Rights)',
                original: "We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.--That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, --That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness.",
                modern: "Ideally, it is obvious that everyone is equal and has rights given by God that cannot be taken away: Life, Freedom, and the chance to be happy. Governments exist only to protect these rights, and they only have power because the people say so. If a government starts destroying these rights, the people have the right to change it or get rid of it and create a new one that will keep them safe and happy.",
                analysis: "The core philosophy. 1. Rights come from God/Nature, not the King. 2. Government works for the people (Consent of the Governed).",
                vocab: {
                "self-evident": "Obvious; needing no explanation.",
                "unalienable": "Cannot be taken away or denied.",
                "endowed": "Given or provided with.",
                "consent": "Permission or agreement.",
                "abolish": "To formally put an end to something."
                }
            },
            {
                id: 'C',
                title: 'The Right to Revolution',
                original: "Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn, that mankind are more disposed to suffer, while evils are sufferable, than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security.--Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.",
                modern: "Wisdom tells us not to change governments for small reasons. People usually prefer to suffer through bad times rather than cause chaos by changing their government. But when a government abuses its power over and over again to create a tyranny, it is not just the people's right but their duty to overthrow it. We have suffered patiently, but now we must change our government. The King has repeatedly hurt us to create a tyranny. Here is the proof.",
                analysis: "Jefferson admits revolution is serious business. It shouldn't be done for small reasons, but the King's abuse has gone on too long.",
                vocab: {
                "prudence": "Cautiousness; good judgment.",
                "transient": "Lasting only for a short time.",
                "usurpations": "Taking someone's power or property by force.",
                "despotism": "Absolute power or tyranny.",
                "evinces": "Clearly shows or reveals."
                }
            },
            {
                id: 'D',
                title: 'Grievances: Legislative Powers',
                original: "He has refused his Assent to Laws, the most wholesome and necessary for the public good. He has forbidden his Governors to pass Laws of immediate and pressing importance, unless suspended in their operation till his Assent should be obtained; and when so suspended, he has utterly neglected to attend to them. He has refused to pass other Laws for the accommodation of large districts of people, unless those people would relinquish the right of Representation in the Legislature, a right inestimable to them and formidable to tyrants only. He has called together legislative bodies at places unusual, uncomfortable, and distant from the depository of their public Records, for the sole purpose of fatiguing them into compliance with his measures. He has dissolved Representative Houses repeatedly, for opposing with manly firmness his invasions on the rights of the people. He has refused for a long time, after such dissolutions, to cause others to be elected; whereby the Legislative powers, incapable of Annihilation, have returned to the People at large for their exercise; the State remaining in the mean time exposed to all the dangers of invasion from without, and convulsions within.",
                modern: "The King has refused to sign laws that we need. He won't let our local leaders pass important laws. He makes it hard for us to pass laws for new regions unless we give up our right to representation. He makes our representatives meet in strange, far-away places just to tire them out. He has fired our determined representatives and refused to let us elect new ones, leaving us vulnerable to invasion and chaos.",
                analysis: "The 'He' is King George III. This section lists how the King stopped the colonies from governing themselves.",
                vocab: {
                "assent": "Official approval or agreement.",
                "relinquish": "To give up.",
                "annihilation": "Complete destruction.",
                "convulsions": "Violent political turmoil."
                }
            },
            {
                id: 'E',
                title: 'Grievances: Judiciary & Immigration',
                original: "He has endeavoured to prevent the population of these States; for that purpose obstructing the Laws for Naturalization of Foreigners; refusing to pass others to encourage their migrations hither, and raising the conditions of new Appropriations of Lands. He has obstructed the Administration of Justice, by refusing his Assent to Laws for establishing Judiciary powers. He has made Judges dependent on his Will alone, for the tenure of their offices, and the amount and payment of their salaries. He has erected a multitude of New Offices, and sent hither swarms of Officers to harrass our people, and eat out their substance.",
                modern: "He has tried to stop people from moving here by blocking citizenship laws and making land expensive. He has blocked our justice system by refusing to let us set up courts. He controls our judges by being the only one who pays them and decides how long they keep their jobs. He has sent swarms of new government officials to harass us and eat our food.",
                analysis: "The King controlled the courts (making judges biased) and sent soldiers/officials to live off the colonists' resources.",
                vocab: {
                "naturalization": "The process of becoming a citizen.",
                "tenure": "The period of time a job lasts.",
                "multitude": "A large number.",
                "substance": "Wealth, resources, or food."
                }
            },
            {
                id: 'F',
                title: 'Grievances: Military & Quartering',
                original: "He has kept among us, in times of peace, Standing Armies without the Consent of our legislatures. He has affected to render the Military independent of and superior to the Civil power. He has combined with others to subject us to a jurisdiction foreign to our constitution, and unacknowledged by our laws; giving his Assent to their Acts of pretended Legislation: For Quartering large bodies of armed troops among us: For protecting them, by a mock Trial, from punishment for any Murders which they should commit on the Inhabitants of these States:",
                modern: "He keeps armies here even when there is no war, without our permission. He thinks the military is more important than our local government. He works with Parliament to force laws on us that we didn't agree to. He forces us to house soldiers in our homes. If those soldiers kill us, he protects them with fake trials.",
                analysis: "A direct attack on the Quartering Act and the presence of British troops who were essentially occupying American cities.",
                vocab: {
                "standing armies": "Permanent armies stationed in a country.",
                "quartering": "Housing soldiers.",
                "mock trial": "A fake or unfair trial.",
                "civil power": "The regular government (not military)."
                }
            },
            {
                id: 'G',
                title: 'Grievances: Taxes & Rights',
                original: "For cutting off our Trade with all parts of the world: For imposing Taxes on us without our Consent: For depriving us in many cases, of the benefits of Trial by Jury: For transporting us beyond Seas to be tried for pretended offences: For abolishing the free System of English Laws in a neighbouring Province, establishing therein an Arbitrary government, and enlarging its Boundaries so as to render it at once an example and fit instrument for introducing the same absolute rule into these Colonies: For taking away our Charters, abolishing our most valuable Laws, and altering fundamentally the Forms of our Governments: For suspending our own Legislatures, and declaring themselves invested with power to legislate for us in all cases whatsoever.",
                modern: "He stopped us from trading with the rest of the world. He taxes us without our permission. He takes away our right to a trial by a jury of our peers. He sends us across the ocean to England to stand trial for fake crimes. He abolished English laws in Canada (Quebec Act) to threaten our liberty. He took away our charters and changed our government. He suspended our legislatures and declared he has total power over us.",
                analysis: "Referencing the Intolerable Acts. 'Taxation without representation' is the famous theme here.",
                vocab: {
                "imposing": "Forcing something to be accepted.",
                "depriving": "Taking something away from someone.",
                "arbitrary": "Based on random choice or whim, rather than reason."
                }
            },
            {
                id: 'H',
                title: 'Grievances: War & Violence',
                original: "He has abdicated Government here, by declaring us out of his Protection and waging War against us. He has plundered our seas, ravaged our Coasts, burnt our towns, and destroyed the lives of our people. He is at this time transporting large Armies of foreign Mercenaries to compleat the works of death, desolation and tyranny, already begun with circumstances of Cruelty & perfidy scarcely paralleled in the most barbarous ages, and totally unworthy the Head of a civilized nation. He has constrained our fellow Citizens taken Captive on the high Seas to bear Arms against their Country, to become the executioners of their friends and Brethren, or to fall themselves by their Hands. He has excited domestic insurrections amongst us, and has endeavoured to bring on the inhabitants of our frontiers, the merciless Indian Savages, whose known rule of warfare, is an indistinguished destruction of all ages, sexes and conditions.",
                modern: "He has given up his right to rule us by declaring war on us. He burns our towns, ruins our trade, and kills our people. He is hiring foreign soldiers (Mercenaries) to come here and kill us with cruelty. He kidnaps our sailors and forces them to fight against their own friends and family. He has encouraged slave rebellions and Native American attacks against us.",
                analysis: "The King is no longer a ruler; he is an enemy waging war. Mentions 'Hessians' (German mercenaries) and controversial frontier warfare.",
                vocab: {
                "abdicated": "Renounced or gave up power.",
                "plundered": "Stolen goods using force.",
                "mercenaries": "Soldiers hired to fight for a foreign army.",
                "perfidy": "Deceitfulness; untrustworthiness.",
                "insurrections": "Violent uprisings against an authority."
                }
            },
            {
                id: 'I',
                title: 'Failed Petitions',
                original: "In every stage of these Oppressions We have Petitioned for Redress in the most humble terms: Our repeated Petitions have been answered only by repeated injury. A Prince whose character is thus marked by every act which may define a Tyrant, is unfit to be the ruler of a free people.",
                modern: "Every time he did something bad, we asked nicely for him to stop. He just hit us harder. A ruler who acts like a tyrant is not fit to rule free people.",
                analysis: "The 'Olive Branch Petition.' They tried to solve this peacefully, but the King ignored them.",
                vocab: {
                "oppressions": "Cruel and unfair treatment.",
                "redress": "Remedy or compensation for a wrong.",
                "tyrant": "A cruel and oppressive ruler."
                }
            },
            {
                id: 'J',
                title: 'Denunciation of British Brethren',
                original: "Nor have We been wanting in attentions to our Brittish brethren. We have warned them from time to time of attempts by their legislature to extend an unwarrantable jurisdiction over us. We have reminded them of the circumstances of our emigration and settlement here. We have appealed to their native justice and magnanimity, and we have conjured them by the ties of our common kindred to disavow these usurpations, which, would inevitably interrupt our connections and correspondence. They too have been deaf to the voice of justice and of consanguinity. We must, therefore, acquiesce in the necessity, which denounces our Separation, and hold them, as we hold the rest of mankind, Enemies in War, in Peace Friends.",
                modern: "We didn't just blame the King; we told the British people too. We warned them that their Parliament was treating us unfairly. We reminded them we are family. But they ignored us too. So, we have to separate. They are now just like any other country: enemies when we are at war, friends when we are at peace.",
                analysis: "They appealed to the British people as 'brothers' (consanguinity), but were ignored. The emotional break is complete.",
                vocab: {
                "jurisdiction": "Official power to make legal decisions.",
                "magnanimity": "Generosity.",
                "consanguinity": "Relationship by birth; blood relation.",
                "acquiesce": "Accept something reluctantly but without protest."
                }
            },
            {
                id: 'K',
                title: 'The Conclusion (The Declaration)',
                original: "We, therefore, the Representatives of the United States of America, in General Congress, Assembled, appealing to the Supreme Judge of the world for the rectitude of our intentions, do, in the Name, and by Authority of the good People of these Colonies, solemnly publish and declare, That these United Colonies are, and of Right ought to be Free and Independent States; that they are Absolved from all Allegiance to the British Crown, and that all political connection between them and the State of Great Britain, is and ought to be totally dissolved; and that as Free and Independent States, they have full Power to levy War, conclude Peace, contract Alliances, establish Commerce, and to do all other Acts and Things which Independent States may of right do. And for the support of this Declaration, with a firm reliance on the protection of divine Providence, we mutually pledge to each other our Lives, our Fortunes and our sacred Honor.",
                modern: "Therefore, we representatives of the USA declare that we are Free and Independent States. We are no longer part of Britain. We have the power to do everything independent countries do. Relying on God's protection, we promise each other our lives, our wealth, and our honor to defend this independence.",
                analysis: "The actual legal declaration. They are now 'States', not 'Colonies'. The famous final pledge underlines the risk they are taking (treason).",
                vocab: {
                "absolved": "Set free from blame or guilt.",
                "allegiance": "Loyalty to a superior or group.",
                "providence": "Protective care of God.",
                "pledge": "A solemn promise.",
                "rectitude": "Morally correct behavior or thinking."
                }
            }
        ];

        // --- STATE & HELPERS ---
        let isModern = false;
        let vocabMap = {}; // Global map for definitions

        function processTextWithVocab(text, vocabList) {
            if (!vocabList) return text;

            let processedText = text;
            // Sort vocab by length descending to catch phrases first
            const words = Object.keys(vocabList).sort((a, b) => b.length - a.length);

            words.forEach(word => {
                // Add to global map for lookup
                vocabMap[word.toLowerCase()] = vocabList[word];
                
                // Regex to replace word with span. 
                // Uses a placeholder pattern to avoid double-replacing inside HTML tags
                const regex = new RegExp(`\\b(${word})\\b`, 'gi');
                processedText = processedText.replace(regex, (match) => {
                    return `<span class="vocab-word" onclick="openVocab('${match.toLowerCase()}')">${match}</span>`;
                });
            });
            return processedText;
        }

        // --- RENDER FUNCTIONS ---

        function renderNav() {
            const navContainer = document.getElementById('nav-container');
            navContainer.innerHTML = declarationSections.map(section => `
                <button 
                    onclick="scrollToSection('${section.id}')"
                    class="px-3 py-1 rounded text-xs font-bold transition-all text-gray-300 hover:bg-white/10 hover:text-white"
                >
                    ${section.id}
                </button>
            `).join('');
        }

        function renderSections() {
            const container = document.getElementById('sections-container');
            container.innerHTML = declarationSections.map(section => {
                const processedOriginal = processTextWithVocab(section.original, section.vocab);
                
                return `
                <section id="section-${section.id}" class="section-scroll-target group">
                    <!-- Section Label -->
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-[#8e2020] text-white flex items-center justify-center font-bold text-xl shadow-md mr-4 border-4 border-[#f4f1ea] ring-2 ring-[#8e2020]">
                            ${section.id}
                        </div>
                        <h3 class="text-2xl font-serif text-[#2c3e50] font-bold border-b-2 border-gray-200 pb-1 flex-grow">
                            ${section.title}
                        </h3>
                    </div>

                    <!-- Card -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden border border-gray-200 transition-shadow hover:shadow-xl">
                        
                        <!-- Top Bar -->
                        <div class="bg-gray-50 px-6 py-3 border-b border-gray-100 flex items-start space-x-3">
                            <i data-lucide="graduation-cap" class="w-5 h-5 text-blue-600 mt-1 flex-shrink-0"></i>
                            <p class="text-sm text-blue-900 font-medium italic">
                                <span class="font-bold not-italic mr-1">Analysis:</span>
                                ${section.analysis}
                            </p>
                        </div>

                        <!-- Main Text Area -->
                        <div class="flex flex-col md:flex-row">
                            <!-- Original -->
                            <div class="original-content p-6 transition-all duration-300">
                                <h4 class="text-xs uppercase tracking-widest text-gray-400 font-bold mb-3 flex items-center">
                                    <i data-lucide="scroll" class="w-3 h-3 mr-1"></i> Original Text (1776)
                                </h4>
                                <p class="leading-relaxed text-gray-900 font-serif text-lg">
                                    ${processedOriginal}
                                </p>
                            </div>

                            <!-- Modern -->
                            <div class="modern-content p-6 bg-blue-50/30 md:border-l md:border-gray-100 transition-all duration-300">
                                <h4 class="text-xs uppercase tracking-widest text-blue-400 font-bold mb-3 flex items-center">
                                    <i data-lucide="message-circle" class="w-3 h-3 mr-1"></i> Modern Translation
                                </h4>
                                <p class="text-lg text-blue-900 leading-relaxed">
                                    ${section.modern}
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="h-12"></div> <!-- Spacer -->
                `;
            }).join('');
        }

        // --- INTERACTIONS ---

        function toggleModernMode() {
            isModern = !isModern;
            const body = document.body;
            const toggleBg = document.getElementById('toggle-bg');
            const toggleCircle = document.getElementById('toggle-circle');
            const label1776 = document.getElementById('label-1776');
            const labelModern = document.getElementById('label-modern');
            
            const mobileIcon = document.getElementById('mobile-toggle-icon');
            const mobileText = document.getElementById('mobile-toggle-text');

            if (isModern) {
                body.classList.add('show-modern');
                toggleBg.classList.replace('bg-gray-600', 'bg-blue-500');
                toggleCircle.classList.add('translate-x-6');
                label1776.classList.replace('text-yellow-400', 'text-gray-400');
                label1776.classList.remove('font-bold');
                labelModern.classList.replace('text-gray-400', 'text-white');
                labelModern.classList.add('font-bold');
                
                // Mobile Button update
                mobileText.innerText = "Show 1776";
                // Re-render icon (Lucide needs re-init usually, but innerHTML replacement works for simple toggle)
                // We will let Lucide parse again or manually swap svg if needed. 
                // For simplicity here we just re-run icons at end of function.
            } else {
                body.classList.remove('show-modern');
                toggleBg.classList.replace('bg-blue-500', 'bg-gray-600');
                toggleCircle.classList.remove('translate-x-6');
                label1776.classList.replace('text-gray-400', 'text-yellow-400');
                label1776.classList.add('font-bold');
                labelModern.classList.replace('text-white', 'text-gray-400');
                labelModern.classList.remove('font-bold');

                mobileText.innerText = "Translate";
            }
            lucide.createIcons();
        }

        function scrollToSection(id) {
            const element = document.getElementById(`section-${id}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function openVocab(word) {
            const def = vocabMap[word.toLowerCase()];
            if (def) {
                document.getElementById('modal-word').innerText = word;
                document.getElementById('modal-def').innerText = def;
                document.getElementById('vocab-modal').classList.remove('hidden');
            }
        }

        function closeModal() {
            document.getElementById('vocab-modal').classList.add('hidden');
        }

        // --- INIT ---
        window.onload = () => {
            renderNav();
            renderSections();
            lucide.createIcons();
        };

    </script>
</body>
</html>
