<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1787: The Fight for the Future</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7;
            color: #1A1A1A;
            overflow-x: hidden;
        }
        h1, h2, h3, .serif {
            font-family: 'Playfair Display', serif;
        }
        
        /* 3D Animations */
        .float-3d {
            animation: float 6s ease-in-out infinite;
        }
        .float-3d-delayed {
            animation: float 6s ease-in-out infinite;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0% { transform: translateY(0px) rotate3d(1, 1, 1, 2deg); }
            50% { transform: translateY(-20px) rotate3d(1, 1, 1, -2deg); }
            100% { transform: translateY(0px) rotate3d(1, 1, 1, 2deg); }
        }

        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease-out;
        }
        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Perspective Container */
        .perspective-container {
            perspective: 1000px;
        }

        /* 3D Coin Styles */
        .perspective-1000 {
            perspective: 1000px;
        }
        .preserve-3d {
            transform-style: preserve-3d;
        }
        .backface-hidden {
            backface-visibility: hidden;
        }
        .rotate-y-180 {
            transform: rotateY(180deg);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F1F1F1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #C4C4C4; 
            border-radius: 4px;
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        federalist: {
                            light: '#E6F0FF',
                            DEFAULT: '#1E3A8A', /* Navy Blue */
                            dark: '#172554',
                        },
                        antifederalist: {
                            light: '#FFEBE6',
                            DEFAULT: '#9F1239', /* Colonial Red */
                            dark: '#881337',
                        },
                        parchment: '#FDFBF7',
                        ink: '#1A1A1A'
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // DATA: Content for the Debate Portal
        // ==========================================
        const debateContent = {
            federalist: {
                title: "The Federalists",
                subtitle: "Unity. Order. Prosperity.",
                color: "text-federalist",
                bgColor: "bg-federalist",
                lightBg: "bg-federalist-light",
                borderColor: "border-federalist",
                glow: "blue",
                leaders: ["Alexander Hamilton", "James Madison", "John Jay"],
                coreBelief: "A strong central government is essential to protect the nation from foreign threats and domestic unrest (like Shays' Rebellion).",
                arguments: [
                    {
                        title: "We Need a Strong Executive",
                        point: "Without a strong President to enforce laws, the government is just a suggestion. We need 'Energy in the Executive' to get things done.",
                        counter: "Rebuttal to Anti-Feds: It's not a King. The President is elected every 4 years and can be impeached."
                    },
                    {
                        title: "The Union Protects Liberty",
                        point: "Small republics are weak and fight each other. A large Republic protects rights better because there are so many groups, no single group can take over.",
                        counter: "Rebuttal to Anti-Feds: Your 'States Rights' approach just creates 13 weak little countries."
                    },
                    {
                        title: "Checks & Balances Work",
                        point: "Ambition must counteract ambition. The 3 branches will watch each other. We don't need a Bill of Rights because the government only has the powers we gave it.",
                        counter: "Rebuttal to Anti-Feds: Listing rights is dangerous‚Äîif we forget to list one, does that mean we don't have it?"
                    }
                ],
                quotes: [
                    { text: "If men were angels, no government would be necessary.", author: "James Madison, Federalist No. 51" },
                    { text: "A government ought to be clothed with all the powers requisite to complete execution of its trust.", author: "Alexander Hamilton, Federalist No. 23" },
                    { text: "The vigor of government is essential to the security of liberty.", author: "Alexander Hamilton, Federalist No. 1" }
                ]
            },
            antifederalist: {
                title: "The Anti-Federalists",
                subtitle: "Liberty. Local Rule. Rights.",
                color: "text-antifederalist",
                bgColor: "bg-antifederalist",
                lightBg: "bg-antifederalist-light",
                borderColor: "border-antifederalist",
                glow: "red",
                leaders: ["Patrick Henry", "George Mason", "Richard Henry Lee"],
                coreBelief: "The Constitution gives the government too much power. It will swallow up the states and eventually become a tyranny.",
                arguments: [
                    {
                        title: "Where is the Bill of Rights?",
                        point: "You created a powerful government but didn't write down our rights? That is insanity. We will not sign until Free Speech and Trial by Jury are guaranteed.",
                        counter: "Rebuttal to Federalists: You say we don't need one. We say history proves governments always steal rights if they aren't written down."
                    },
                    {
                        title: "The President = A King",
                        point: "He has a standing army. He commands the navy. He can pardon criminals. He has no term limits. This is a 'fetus of monarchy.'",
                        counter: "Rebuttal to Federalists: You call it 'Energy,' we call it Tyranny. One man should not have this much power."
                    },
                    {
                        title: "Power to the States",
                        point: "A government in a faraway capital cannot understand the needs of a farmer in Georgia. Power must stay local where the people are.",
                        counter: "Rebuttal to Federalists: Your 'Large Republic' will just be a rich elite ruling over the poor."
                    }
                ],
                quotes: [
                    { text: "I smell a rat.", author: "Patrick Henry" },
                    { text: "There is no declaration of rights... the laws of the general government being paramount.", author: "George Mason" },
                    { text: "When the people once part with power, they can seldom or never resume it but by force.", author: "Brutus No. 1" }
                ]
            }
        };

        // ==========================================
        // COMPONENTS: Icons & UI Elements
        // ==========================================
        
        const QuillIcon = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z" fill="currentColor" fillOpacity="0.1"></path>
                <line x1="16" y1="8" x2="2" y2="22"></line>
                <line x1="17.5" y1="15" x2="9" y2="15"></line>
            </svg>
        );

        const ScrollIcon = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 20H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2z" fill="currentColor" fillOpacity="0.1"></path>
                <path d="M15 2v4a2 2 0 0 0 2 2h4"></path>
            </svg>
        );

        const ShieldIcon = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
        );
        const AlertIcon = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
        );

        // Tilt Card Component (for Portal)
        const TiltCard = ({ children, className, glowColor }) => {
            const cardRef = useRef(null);
            const [transform, setTransform] = useState('');
            const [glow, setGlow] = useState('opacity-0');

            const handleMouseMove = (e) => {
                const card = cardRef.current;
                if (!card) return;
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = ((y - centerY) / centerY) * -7; 
                const rotateY = ((x - centerX) / centerX) * 7;
                setTransform(`perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`);
                setGlow('opacity-100');
            };

            const handleMouseLeave = () => {
                setTransform('perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)');
                setGlow('opacity-0');
            };

            return (
                <div ref={cardRef} className={`relative transition-all duration-200 ease-out ${className}`} style={{ transform, transformStyle: 'preserve-3d' }} onMouseMove={handleMouseMove} onMouseLeave={handleMouseLeave}>
                    <div className={`absolute inset-0 pointer-events-none transition-opacity duration-200 bg-gradient-to-tr ${glowColor === 'blue' ? 'from-white/0 via-blue-100/20 to-white/0' : 'from-white/0 via-red-100/20 to-white/0'} z-10 rounded-xl ${glow}`} />
                    {children}
                </div>
            );
        };

        // Coin Flip Component (for Portal)
        const CoinFlip = ({ side }) => {
            return (
                <div className="perspective-1000 w-16 h-16 mx-auto mb-4">
                    <div className={`relative w-full h-full transition-transform duration-700 preserve-3d ${side === 'antifederalist' ? 'rotate-y-180' : ''}`}>
                        <div className="absolute w-full h-full backface-hidden rounded-full bg-federalist border-2 border-white shadow-lg flex items-center justify-center">
                            <span className="serif text-white font-bold text-xl">F</span>
                        </div>
                        <div className="absolute w-full h-full backface-hidden rounded-full bg-antifederalist border-2 border-white shadow-lg flex items-center justify-center rotate-y-180">
                            <span className="serif text-white font-bold text-xl">A</span>
                        </div>
                    </div>
                </div>
            );
        };

        // Section Component (for Landing Page)
        const Section = ({ children, className, id }) => {
            const [isVisible, setIsVisible] = useState(false);
            const domRef = useRef();

            useEffect(() => {
                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => setIsVisible(entry.isIntersecting));
                });
                observer.observe(domRef.current);
                return () => observer.disconnect();
            }, []);

            return (
                <div id={id} ref={domRef} className={`scroll-reveal ${isVisible ? 'visible' : ''} ${className}`}>
                    {children}
                </div>
            );
        };

        // ==========================================
        // PAGE VIEWS
        // ==========================================

        // View 1: Landing Page
        const LandingView = ({ onEnterPortal }) => {
            return (
                <div className="min-h-screen relative overflow-hidden">
                    <div className="fixed inset-0 pointer-events-none opacity-[0.03]" style={{backgroundImage: 'radial-gradient(#000 1px, transparent 1px)', backgroundSize: '40px 40px'}}></div>

                    {/* HERO */}
                    <header className="relative min-h-screen flex flex-col justify-center items-center text-center px-6 perspective-container">
                        <div className="absolute top-1/4 left-10 md:left-1/4 opacity-20 text-federalist float-3d pointer-events-none">
                            <QuillIcon className="w-48 h-48 md:w-64 md:h-64" />
                        </div>
                        <div className="absolute bottom-1/4 right-10 md:right-1/4 opacity-20 text-antifederalist float-3d-delayed pointer-events-none">
                            <ScrollIcon className="w-48 h-48 md:w-64 md:h-64" />
                        </div>

                        <div className="z-10 max-w-4xl">
                            <p className="text-federalist font-bold tracking-[0.3em] uppercase mb-6 animate-pulse">Philadelphia ‚Ä¢ 1787</p>
                            <h1 className="text-6xl md:text-8xl serif font-bold text-ink mb-8 leading-tight">A Nation <br/><span className="italic text-transparent bg-clip-text bg-gradient-to-r from-federalist to-antifederalist">Divided</span></h1>
                            <p className="text-xl md:text-2xl text-gray-600 font-light max-w-2xl mx-auto mb-12 leading-relaxed">The ink is wet. The doors are unlocked. Now, 13 states must decide: Do we sign, or do we walk away?</p>
                            <button onClick={() => document.getElementById('context').scrollIntoView({behavior: 'smooth'})} className="px-8 py-3 bg-ink text-white rounded-full font-medium hover:bg-gray-800 transition-colors shadow-lg">Explore the Conflict</button>
                        </div>
                    </header>

                    {/* CONTEXT */}
                    <Section className="py-24 bg-white relative" id="context">
                        <div className="container mx-auto px-6 max-w-5xl">
                            <div className="grid md:grid-cols-2 gap-12 items-center">
                                <div>
                                    <div className="w-16 h-1 bg-antifederalist mb-6"></div>
                                    <h2 className="text-4xl serif font-bold mb-6">The Spark</h2>
                                    <p className="text-lg text-gray-700 leading-relaxed mb-4">The Revolutionary War is over, but peace hasn't come. The government is broke. Farmers are losing their land.</p>
                                    <p className="text-lg text-gray-700 leading-relaxed">In Massachusetts, **Shays' Rebellion** has terrified the wealthy elite. They realized the current government (The Articles of Confederation) is too weak to stop chaos.</p>
                                </div>
                                <div className="bg-gray-100 rounded-xl p-8 border border-gray-200 shadow-inner transform rotate-2 hover:rotate-0 transition-transform duration-500">
                                    <h3 className="serif text-2xl italic text-gray-400 mb-4">"A little rebellion now and then is a good thing..."</h3>
                                    <p className="text-right font-bold text-gray-500">‚Äî Thomas Jefferson</p>
                                    <div className="mt-8 pt-8 border-t border-gray-200">
                                        <h3 className="serif text-2xl italic text-gray-900 mb-4">"We are fast verging to anarchy and confusion!"</h3>
                                        <p className="text-right font-bold text-federalist">‚Äî George Washington</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </Section>

                    {/* SOLUTION */}
                    <Section className="py-24 bg-parchment relative">
                        <div className="container mx-auto px-6 max-w-5xl text-center">
                            <h2 className="text-4xl serif font-bold mb-12">The Secret Solution</h2>
                            <div className="grid md:grid-cols-3 gap-8">
                                <div className="bg-white p-8 rounded-lg shadow-sm border-t-4 border-federalist"><div className="text-4xl mb-4">ü§ê</div><h3 className="serif text-xl font-bold mb-2">Secrecy</h3><p className="text-gray-600">55 men met in a hot room with windows nailed shut. No one knew what they were planning.</p></div>
                                <div className="bg-white p-8 rounded-lg shadow-sm border-t-4 border-gray-800"><div className="text-4xl mb-4">üóëÔ∏è</div><h3 className="serif text-xl font-bold mb-2">Destruction</h3><p className="text-gray-600">They didn't fix the old government. They threw it in the trash and started over.</p></div>
                                <div className="bg-white p-8 rounded-lg shadow-sm border-t-4 border-antifederalist"><div className="text-4xl mb-4">üëë</div><h3 className="serif text-xl font-bold mb-2">Power</h3><p className="text-gray-600">They created a "President." To many, this looked exactly like a King.</p></div>
                            </div>
                        </div>
                    </Section>

                    {/* CHOICE / NAVIGATION TO PORTAL */}
                    <Section className="py-32 bg-ink text-white relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                             <div className="absolute top-[-20%] left-[-10%] w-[500px] h-[500px] rounded-full bg-federalist blur-[100px]"></div>
                             <div className="absolute bottom-[-20%] right-[-10%] w-[500px] h-[500px] rounded-full bg-antifederalist blur-[100px]"></div>
                        </div>
                        <div className="container mx-auto px-6 max-w-6xl relative z-10">
                            <div className="text-center mb-16">
                                <h2 className="text-5xl serif font-bold mb-6">Choose Your Side</h2>
                                <p className="text-xl text-gray-300">The document is finished. Now the fight begins.<br/>Click a card to enter the Debate Portal.</p>
                            </div>
                            <div className="grid md:grid-cols-2 gap-16">
                                <div onClick={() => onEnterPortal('federalist')} className="group cursor-pointer">
                                    <div className="bg-gray-900 border border-gray-700 p-8 rounded-2xl h-full hover:border-federalist transition-colors duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"><ShieldIcon className="w-32 h-32 text-federalist" /></div>
                                        <h3 className="text-3xl serif font-bold text-federalist mb-4">The Federalists</h3>
                                        <p className="text-gray-300 italic mb-6">"United we stand, divided we fall."</p>
                                        <div className="inline-block mt-4 text-sm font-bold text-federalist border border-federalist px-4 py-2 rounded-full group-hover:bg-federalist group-hover:text-white transition-all">ENTER PORTAL &rarr;</div>
                                    </div>
                                </div>
                                <div onClick={() => onEnterPortal('antifederalist')} className="group cursor-pointer">
                                    <div className="bg-gray-900 border border-gray-700 p-8 rounded-2xl h-full hover:border-antifederalist transition-colors duration-300 relative overflow-hidden">
                                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"><AlertIcon className="w-32 h-32 text-antifederalist" /></div>
                                        <h3 className="text-3xl serif font-bold text-antifederalist mb-4">The Anti-Federalists</h3>
                                        <p className="text-gray-300 italic mb-6">"I smell a rat."</p>
                                        <div className="inline-block mt-4 text-sm font-bold text-antifederalist border border-antifederalist px-4 py-2 rounded-full group-hover:bg-antifederalist group-hover:text-white transition-all">ENTER PORTAL &rarr;</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </Section>
                    <footer className="bg-black text-gray-500 py-12 text-center text-sm"><p className="mb-4">Grade 8 Civics ‚Ä¢ Unit 3</p></footer>
                </div>
            );
        };

        // View 2: Debate Portal
        const PortalView = ({ initialSide, onBack }) => {
            const [side, setSide] = useState(initialSide);
            const data = debateContent[side];

            return (
                <div className="min-h-screen flex flex-col bg-parchment animate-in fade-in zoom-in duration-500">
                    <nav className="w-full py-6 px-8 border-b border-gray-200 bg-white flex justify-between items-center sticky top-0 z-50 shadow-sm backdrop-blur-md bg-white/80">
                        <div className="flex items-center space-x-2 cursor-pointer" onClick={onBack}>
                            <span className="text-xs font-semibold px-2 py-1 bg-gray-100 rounded text-gray-500 hover:bg-gray-200 transition-colors">&larr; BACK TO HISTORY</span>
                            <span className="serif text-xl font-bold tracking-tight ml-2">Debate Portal</span>
                        </div>
                        <div className="flex space-x-4">
                            <button onClick={() => setSide('federalist')} className={`px-6 py-2 rounded-full font-medium transition-all duration-300 ${side === 'federalist' ? 'bg-federalist text-white shadow-lg transform scale-105' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'}`}>Federalist</button>
                            <button onClick={() => setSide('antifederalist')} className={`px-6 py-2 rounded-full font-medium transition-all duration-300 ${side === 'antifederalist' ? 'bg-antifederalist text-white shadow-lg transform scale-105' : 'bg-gray-100 text-gray-500 hover:bg-gray-200'}`}>Anti-Federalist</button>
                        </div>
                    </nav>

                    <main className="flex-grow container mx-auto px-6 py-12 max-w-6xl">
                        <header className="mb-16 text-center">
                            <CoinFlip side={side} />
                            <h2 className={`text-sm font-bold tracking-[0.2em] uppercase mb-3 ${data.color}`}>Assignment: Prepare for Debate</h2>
                            <h1 className="text-6xl serif font-bold mb-4 text-ink">{data.title}</h1>
                            <p className="text-xl serif italic text-gray-600 mb-8">"{data.subtitle}"</p>
                            <div className="flex justify-center space-x-8">
                                {data.leaders.map((leader, i) => <div key={i} className="bg-white px-4 py-2 rounded shadow-sm border border-gray-100 font-medium text-gray-800">{leader}</div>)}
                            </div>
                        </header>

                        <section className={`${data.lightBg} rounded-2xl p-8 mb-16 border-l-4 ${data.borderColor}`}>
                            <h3 className="serif text-2xl font-bold mb-2 text-gray-900">Core Belief</h3>
                            <p className="text-lg leading-relaxed text-gray-800">{data.coreBelief}</p>
                        </section>

                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
                            {data.arguments.map((arg, idx) => (
                                <TiltCard key={idx} className="bg-white rounded-xl p-8 shadow-md border border-gray-100 flex flex-col group cursor-default" glowColor={data.glow}>
                                    <h3 className="serif text-xl font-bold mb-4 text-gray-900">{arg.title}</h3>
                                    <p className="text-gray-700 leading-relaxed mb-6 flex-grow">{arg.point}</p>
                                    <div className="pt-6 border-t border-gray-100"><p className="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Defense Strategy</p><p className="text-sm text-gray-600 italic">"{arg.counter}"</p></div>
                                </TiltCard>
                            ))}
                        </div>

                        <section>
                            <div className="flex items-end mb-8 border-b border-gray-200 pb-4"><h3 className="serif text-3xl font-bold text-gray-900">Primary Source Archive</h3></div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {data.quotes.map((quote, idx) => (
                                    <div key={idx} className="relative bg-white p-8 rounded-lg shadow-sm border border-gray-200 overflow-hidden group hover:shadow-md transition-shadow">
                                        <div className={`absolute top-0 left-0 w-2 h-full ${data.bgColor} transition-all duration-500 group-hover:w-3`}></div>
                                        <blockquote className="relative z-10"><p className="text-xl font-medium text-gray-900 leading-relaxed mb-4">"{quote.text}"</p><footer className={`text-sm font-bold uppercase tracking-wider ${data.color}`}>‚Äî {quote.author}</footer></blockquote>
                                    </div>
                                ))}
                            </div>
                        </section>
                    </main>
                    <footer className="bg-white border-t border-gray-200 py-12"><div className="container mx-auto px-6 text-center"><p className="text-gray-500 text-sm">Created for Grade 8 Civics ‚Ä¢ The Constitutional Convention Unit</p></div></footer>
                </div>
            );
        };

        // ==========================================
        // MAIN APP
        // ==========================================
        const App = () => {
            const [view, setView] = useState('landing'); // 'landing' or 'portal'
            const [portalSide, setPortalSide] = useState('federalist');

            const enterPortal = (side) => {
                setPortalSide(side);
                setView('portal');
                window.scrollTo(0,0);
            };

            const goBack = () => {
                setView('landing');
                window.scrollTo(0,0);
            };

            return (
                <div>
                    {view === 'landing' 
                        ? <LandingView onEnterPortal={enterPortal} /> 
                        : <PortalView initialSide={portalSide} onBack={goBack} />
                    }
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
